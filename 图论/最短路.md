# 最短路

## Dijkstra

dijkstra不能处理 **负权图** ，由于已经更新完的

## 一些习题

### CF843D Dynamic Shortest Path

有一张 $n$ 个点 $m$ 条边的有向带权图，你需要回答如下的 $q$ 个问 题:

询问以 1 为起点到 $v$ 的最短路

$l_{1}, l_{2}, \ldots, l_{c}$ 的边的边权增加 1

每次给若干个边 +1 的边权，然后查询的是 1 - v 的最短距离：首先这必然是先 dijk 求出初始 1 到每个点的最短路 d[]（到不了的则设为-1）

然后考虑给边权 +1 时 d[] 的变化，把这个变化即为 add[]，即 d[] 的增量。很明显处在最短路下，增量越小越好，故add[]初始化为正无穷。d[1] 无变化，add[0] = 0；1 直连的点 v 的 add[v] 会发生变化，当且仅当更新后的边权 d[u] + add[u] + w[i] - d[v] < add[v]，此时把 add[v] 更新，并加入松弛队列中。

从这个思路出发，去 bfs d[] 的增量网络。从最小的 add[u] = 0 即 u = 1 开始松弛，当满足 d[u] + add[u] + w[i] - d[v] < add[v] 就松弛 v，将 v 加入队列中。那么队列的值域即为题目中的 c，也即增加的边权和。最后将增量加入到每个 d[u]， $O(n)$​​ 实现最短路的更新。

