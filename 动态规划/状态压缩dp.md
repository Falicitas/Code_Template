# 状态压缩DP

## 一些习题

### CF1313D Happy new year

给区间施加魔法，区间的小盆友会获得一个糖果，小盆友获得奇数个糖果就会开心；一共有 $n$ 种魔法，确定施加的魔法使最多的小盆友开心。保证所有魔法施展完，每个小盆友至多收到 8 颗糖果。

神奇的题目。将区间离散后点值化块，处理一下每个块内的小盆友被哪些区间覆盖了。由于题目保证小盆友至多被 8 个区间覆盖，故用 8bit 表示小盆友被哪些区间覆盖过。dp 可以从前面一个小盆友被覆盖的情况转移而来。区间按 $R$ 排序后有很神奇的性质，即覆盖第 $i-1$ 块小盆友与第 $i$ 块小盆友的共同区间编号恰好在 $i-1$ 小盆友的后缀连续编号，故前缀取最大值，共同的区间由 $i-1$ 小盆友确定，剩下的在枚举只有 $i$ 小盆友有的状态数。复杂度 $O(n2^k)$。

